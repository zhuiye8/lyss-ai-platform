# Lyss AI Platform 微服务开发优先级

## 📅 当前开发状态 (2025-07-10)

**当前正在开发**: 尚未开始，准备启动第一个微服务  
**项目阶段**: 第一阶段 - 核心功能开发  
**完成度**: 基础设施和文档 100%，业务代码 0%

---

## 🎯 开发优先级排序

### 第一优先级 (立即开始)

#### 1. **Auth Service (认证服务)** 🔐
- **状态**: ⏳ 待开发
- **重要性**: 🔴 最高优先级
- **原因**: 其他所有服务都依赖认证功能
- **技术栈**: Python + FastAPI + JWT + Redis
- **端口**: 8001

#### 2. **Tenant Service (租户服务)** 👥  
- **状态**: ⏳ 待开发
- **重要性**: 🔴 最高优先级
- **原因**: 管理用户数据和供应商凭证，Auth Service 需要调用此服务
- **技术栈**: Python + FastAPI + PostgreSQL + pgcrypto
- **端口**: 8002

### 第二优先级 (核心功能)

#### 3. **Backend (API Gateway)** 🚀
- **状态**: ⏳ 待开发  
- **重要性**: 🟠 高优先级
- **原因**: 统一入口，连接前后端，路由分发
- **技术栈**: Python + FastAPI + 服务间调用
- **端口**: 8000

#### 4. **Frontend (前端应用)** 🎨
- **状态**: ⏳ 待开发
- **重要性**: 🟠 高优先级  
- **原因**: 提供用户界面，验证整体功能
- **技术栈**: React + TypeScript + Ant Design + Ant Design X
- **端口**: 3000

### 第三优先级 (AI核心功能)

#### 5. **EINO Service (AI工作流服务)** ⚡
- **状态**: ⏳ 待开发
- **重要性**: 🟡 中优先级
- **原因**: AI功能核心，但需要前面的基础服务支撑
- **技术栈**: Go + EINO框架 + AI模型调用
- **端口**: 8003

#### 6. **Memory Service (记忆服务)** 🧠
- **状态**: ⏳ 待开发  
- **重要性**: 🟡 中优先级
- **原因**: AI对话增强功能，可以最后开发
- **技术栈**: Python + FastAPI + Mem0AI + Qdrant
- **端口**: 8004

---

## 📋 当前开发任务

### 🎯 下一个开发目标: Auth Service

#### 开发前必读文档
1. `docs/auth_service.md` - 认证服务完整规范  
2. `docs/STANDARDS.md` - 开发规范总纲
3. `CLAUDE.md` - Claude开发助手指令
4. `.env.example` - 环境变量配置说明

#### 开发要求
- ✅ **使用中文注释和回复**
- ✅ **严格遵循多租户数据隔离**
- ✅ **实现JWT认证和刷新机制**
- ✅ **Redis会话管理**
- ✅ **与Tenant Service集成验证用户**
- ✅ **完整的错误处理和日志记录**
- ✅ **健康检查接口**

#### 核心功能清单
- [ ] 用户登录 (`/auth/login`)
- [ ] JWT令牌刷新 (`/auth/refresh`)
- [ ] 用户登出 (`/auth/logout`)
- [ ] 令牌验证 (`/auth/verify`)
- [ ] 内部服务认证接口 (`/internal/verify`)
- [ ] 健康检查 (`/health`)

#### 技术要点
- JWT签名和验证
- Redis会话存储
- 密码验证 (调用Tenant Service)
- 请求ID追踪
- 错误统一处理

---

## 🔄 开发流程

### 开发步骤 (每个微服务)
1. **阅读规范文档** - 理解服务职责和API设计
2. **创建项目结构** - 按照PROJECT_STRUCTURE.md组织代码
3. **配置开发环境** - 安装依赖，配置环境变量
4. **实现核心功能** - 按照规范文档实现API接口
5. **本地测试验证** - 确保功能正常和健康检查通过
6. **更新开发状态** - 在本文档中标记完成状态

### 代码规范要求
- **提交信息**: `feat(auth): 实现用户登录功能`
- **注释语言**: 全部使用中文
- **错误信息**: 返回中文错误描述
- **日志格式**: JSON结构化，包含request_id和tenant_id
- **API响应**: 统一格式，包含success、data、message字段

### 测试要求
- **功能测试**: 确保所有API接口正常工作
- **集成测试**: 验证与其他服务的调用关系
- **健康检查**: `/health`接口必须返回正确状态
- **多租户测试**: 验证数据隔离机制

---

## 📊 开发进度追踪

| 服务名称 | 状态 | 开始时间 | 完成时间 | 负责人 | 备注 |
|---------|------|----------|----------|---------|------|
| Auth Service | ⏳ 待开发 | - | - | Claude | 下一个开发目标 |
| Tenant Service | ⏳ 待开发 | - | - | - | Auth Service 完成后开始 |
| Backend API Gateway | ⏳ 待开发 | - | - | - | - |
| Frontend | ⏳ 待开发 | - | - | - | - |
| EINO Service | ⏳ 待开发 | - | - | - | - |
| Memory Service | ⏳ 待开发 | - | - | - | - |

### 状态说明
- ⏳ 待开发 - 尚未开始
- 🔄 开发中 - 正在开发
- ✅ 已完成 - 开发完成并测试通过
- ⚠️ 有问题 - 存在问题需要修复

---

## 🚨 重要提醒

### 开发约束
1. **安全第一**: 所有数据操作必须验证tenant_id
2. **服务边界**: 严格按照微服务职责分工，不得跨界
3. **文档驱动**: 严格按照规范文档实现，不得随意更改
4. **中文开发**: 注释、提交、错误信息全部使用中文

### 依赖关系
- Auth Service ← Tenant Service (调用用户验证)
- API Gateway ← Auth Service (认证委托)
- Frontend ← API Gateway (API调用)
- EINO Service ← Tenant Service (获取供应商凭证)
- Memory Service ← Tenant Service (检查用户偏好)

### 联调顺序
1. **Auth + Tenant**: 先实现认证和用户管理
2. **API Gateway**: 实现统一入口和路由
3. **Frontend**: 实现用户界面
4. **EINO + Memory**: 最后实现AI功能

---

**📝 文档更新**: 每完成一个微服务后，请及时更新本文档的开发进度