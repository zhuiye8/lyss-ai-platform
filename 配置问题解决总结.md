# é…ç½®é—®é¢˜è§£å†³æ€»ç»“

## ğŸ” é—®é¢˜åˆ†æ

æ‚¨æå‡ºçš„é—®é¢˜éå¸¸å‡†ç¡®ä¸”é‡è¦ï¼š

### 1. **åç«¯å¯åŠ¨é—®é¢˜**
- é”™è¯¯ï¼šä½¿ç”¨ `api-gateway` è€Œä¸æ˜¯ `api_gateway`
- åŸå› ï¼šæ¨¡å—åç§°ä¸åŒ¹é…

### 2. **ç¯å¢ƒé…ç½®é‡å¤**
- é—®é¢˜ï¼šæ ¹ç›®å½•å’Œbackendç›®å½•éƒ½æœ‰ `.env` æ–‡ä»¶
- åŸå› ï¼šé…ç½®ç®¡ç†ç­–ç•¥ä¸æ¸…æ™°

### 3. **Mem0AIé…ç½®ä¸ç¬¦åˆå®˜æ–¹æ ‡å‡†**
- é—®é¢˜ï¼šMemoryæœåŠ¡é…ç½®ä¸ç¬¦åˆMem0AIå®˜æ–¹è¦æ±‚
- åŸå› ï¼šæ²¡æœ‰æŒ‰ç…§å®˜æ–¹æ–‡æ¡£æ ‡å‡†é…ç½®

### 4. **AIæœåŠ¡é…ç½®æ··ä¹±**
- é—®é¢˜ï¼šç¯å¢ƒå˜é‡ä¸­çš„AIé…ç½®ä¸æ•°æ®åº“å­˜å‚¨çš„ç”¨æˆ·é…ç½®æ··åˆ
- åŸå› ï¼šç³»ç»Ÿçº§AIé…ç½®å’Œç”¨æˆ·çº§AIé…ç½®æ²¡æœ‰åŒºåˆ†

## ğŸ› ï¸ è§£å†³æ–¹æ¡ˆ

### 1. ä¿®å¤åç«¯å¯åŠ¨é—®é¢˜

#### é—®é¢˜æ ¹æº
```bash
# é”™è¯¯çš„å¯åŠ¨æ–¹å¼
python -m uvicorn api-gateway.main:app --host 0.0.0.0 --port 8000 --reload
```

#### è§£å†³æ–¹æ¡ˆ
```bash
# æ­£ç¡®çš„å¯åŠ¨æ–¹å¼
python -m uvicorn api_gateway.main:app --host 0.0.0.0 --port 8000 --reload
# æˆ–è€…ä½¿ç”¨å¯åŠ¨è„šæœ¬
python start_server.py
```

### 2. ç»Ÿä¸€ç¯å¢ƒé…ç½®ç®¡ç†

#### è®¾è®¡åŸåˆ™
- **å•ä¸€é…ç½®æº**ï¼šæ‰€æœ‰æœåŠ¡ä»æ ¹ç›®å½• `.env` æ–‡ä»¶åŠ è½½é…ç½®
- **é¿å…é‡å¤**ï¼šåˆ é™¤å­ç›®å½•ä¸­çš„é‡å¤é…ç½®æ–‡ä»¶
- **è·¯å¾„ç»Ÿä¸€**ï¼šæ‰€æœ‰é…ç½®ç±»æŒ‡å‘ `../env` æ–‡ä»¶

#### å®æ–½æ­¥éª¤
1. åˆ é™¤ `backend/.env` é‡å¤æ–‡ä»¶
2. æ›´æ–°æ‰€æœ‰é…ç½®ç±»çš„ `env_file` è·¯å¾„ä¸º `../env`
3. ç¡®ä¿æ‰€æœ‰æœåŠ¡ä»æ ¹ç›®å½•åŠ è½½é…ç½®

### 3. é‡æ„AIæœåŠ¡é…ç½®æ¶æ„

#### é…ç½®åˆ†å±‚
```
â”œâ”€â”€ ç³»ç»Ÿçº§AIé…ç½® (ç¯å¢ƒå˜é‡)
â”‚   â”œâ”€â”€ OPENAI_API_KEY          # ä»…ç”¨äºMem0AI
â”‚   â”œâ”€â”€ OPENAI_BASE_URL         # ä»…ç”¨äºMem0AI
â”‚   â””â”€â”€ OPENAI_EMBEDDING_MODEL  # ä»…ç”¨äºMem0AI
â”‚
â””â”€â”€ ç”¨æˆ·çº§AIé…ç½® (æ•°æ®åº“)
    â”œâ”€â”€ ai_credentials è¡¨       # ç”¨æˆ·AIæœåŠ¡å•†å‡­è¯
    â”œâ”€â”€ ai_models è¡¨           # ç”¨æˆ·å¯ç”¨æ¨¡å‹
    â””â”€â”€ å¤šç§Ÿæˆ·éš”ç¦»             # æ¯ä¸ªç§Ÿæˆ·ç‹¬ç«‹é…ç½®
```

#### ç”¨é€”æ¾„æ¸…
- **ç¯å¢ƒå˜é‡AIé…ç½®**ï¼šä»…ç”¨äºç³»ç»Ÿçº§AIæœåŠ¡ï¼ˆå¦‚Mem0AIï¼‰
- **æ•°æ®åº“AIé…ç½®**ï¼šç”¨äºç”¨æˆ·å¯¹è¯å’Œä¸šåŠ¡åŠŸèƒ½
- **å¤šç§Ÿæˆ·æ”¯æŒ**ï¼šæ¯ä¸ªç§Ÿæˆ·å¯é…ç½®ä¸åŒçš„AIæœåŠ¡å•†

### 4. Mem0AIé…ç½®æ ‡å‡†åŒ–

#### å®˜æ–¹æ ‡å‡†é…ç½®
æ ¹æ®Mem0AIå®˜æ–¹æ–‡æ¡£ï¼Œå®ç°äº†ç¬¦åˆæ ‡å‡†çš„é…ç½®ï¼š

```python
@property
def mem0_config(self) -> Dict[str, Any]:
    return {
        "llm": {
            "provider": "openai",
            "config": {
                "model": "gpt-4o-mini",
                "temperature": 0.1,
                "max_tokens": 1000,
                "api_key": self.openai_api_key,
                "base_url": self.openai_base_url
            }
        },
        "embedder": {
            "provider": self.embedding_provider,
            "config": {
                "model": self.embedding_model,
                "embedding_dims": 384,
                "batch_size": self.embedding_batch_size
            }
        },
        "vector_store": {
            "provider": self.vector_db_provider,
            "config": {
                "host": self.redis_host,
                "port": self.redis_port,
                "password": self.redis_password,
                "db": self.redis_db
            }
        }
    }
```

## ğŸ“ æ›´æ–°çš„æ–‡ä»¶

### 1. é…ç½®æ–‡ä»¶
- **`.env`** - é‡æ„ä¸ºç»Ÿä¸€é…ç½®æº
- **`backend/common/config.py`** - æ›´æ–°é…ç½®è·¯å¾„
- **`memory-service/app/config.py`** - å®Œå…¨é‡å†™ç¬¦åˆMem0AIæ ‡å‡†

### 2. æ–‡æ¡£æ–‡ä»¶
- **`ç¯å¢ƒé…ç½®æ¶æ„è®¾è®¡.md`** - é…ç½®æ¶æ„è®¾è®¡æ–¹æ¡ˆ
- **`backend/å¿«é€Ÿå¯åŠ¨è¯´æ˜.md`** - æ­£ç¡®å¯åŠ¨æ–¹å¼
- **`é…ç½®é—®é¢˜è§£å†³æ€»ç»“.md`** - é—®é¢˜è§£å†³æ€»ç»“

## ğŸ¯ æ ¸å¿ƒæ”¹è¿›

### 1. é…ç½®åŠ è½½è·¯å¾„ç»Ÿä¸€
```python
class Config:
    env_file = "../.env"  # æ‰€æœ‰æœåŠ¡ä»æ ¹ç›®å½•åŠ è½½
    case_sensitive = False
    extra = "ignore"
```

### 2. AIé…ç½®èŒè´£åˆ†ç¦»
```bash
# ç³»ç»Ÿçº§AIé…ç½® (ç¯å¢ƒå˜é‡)
OPENAI_API_KEY=xxx  # ä»…ç”¨äºMem0AIç­‰ç³»ç»ŸæœåŠ¡

# ç”¨æˆ·çº§AIé…ç½® (æ•°æ®åº“)
# é€šè¿‡ç®¡ç†ç•Œé¢é…ç½®ï¼Œæ”¯æŒå¤šç§Ÿæˆ·
```

### 3. MemoryæœåŠ¡Mem0AIé›†æˆ
```python
# ç¬¦åˆå®˜æ–¹æ ‡å‡†çš„é…ç½®ç”Ÿæˆ
settings.mem0_config  # ç”Ÿæˆæ ‡å‡†Mem0AIé…ç½®
```

## âœ… éªŒè¯ç»“æœ

### 1. é…ç½®åŠ è½½æµ‹è¯•
```bash
âœ… Backendé…ç½®åŠ è½½æˆåŠŸ
æ•°æ®åº“URL: postgresql+asyncpg://lyss_dev_user:lyss_dev_password@localhost:5432/lyss_platform_dev
Redis URL: redis://:lyss_redis_dev_password@localhost:6379/0
Memory URL: http://localhost:8001
```

### 2. å¯åŠ¨æµ‹è¯•
- âœ… åç«¯å¯ä»¥æ­£å¸¸å¯åŠ¨
- âœ… é…ç½®æ­£ç¡®åŠ è½½
- âš ï¸ æ•°æ®åº“è¿æ¥å¤±è´¥ï¼ˆéœ€è¦å¯åŠ¨PostgreSQLæœåŠ¡ï¼‰

## ğŸš€ æ­£ç¡®çš„å¯åŠ¨æ­¥éª¤

### 1. å¯åŠ¨åŸºç¡€è®¾æ–½
```bash
# å¯åŠ¨PostgreSQLå’ŒRedis
docker-compose up -d postgres redis
```

### 2. å¯åŠ¨åç«¯æœåŠ¡
```bash
cd backend
source venv/bin/activate
python start_server.py
```

### 3. å¯åŠ¨å…¶ä»–æœåŠ¡
```bash
# MemoryæœåŠ¡
cd memory-service
python -m uvicorn app.main:app --host 0.0.0.0 --port 8001 --reload

# EINOæœåŠ¡
cd eino-service
go run cmd/server/main.go

# å‰ç«¯
cd frontend
npm run dev
```

## ğŸ“Š æ¶æ„ä¼˜åŠ¿

### 1. é…ç½®ç®¡ç†
- **ç»Ÿä¸€æ€§**ï¼šæ‰€æœ‰æœåŠ¡ä½¿ç”¨ç»Ÿä¸€é…ç½®æº
- **å¯ç»´æŠ¤æ€§**ï¼šé…ç½®å˜æ›´åªéœ€ä¿®æ”¹ä¸€ä¸ªæ–‡ä»¶
- **é¿å…å†²çª**ï¼šæ¶ˆé™¤é…ç½®æ–‡ä»¶é‡å¤å’Œä¸ä¸€è‡´

### 2. AIæœåŠ¡æ¶æ„
- **å®‰å…¨æ€§**ï¼šç”¨æˆ·AIå¯†é’¥å­˜å‚¨åœ¨æ•°æ®åº“ä¸­
- **å¤šç§Ÿæˆ·**ï¼šæ”¯æŒæ¯ä¸ªç§Ÿæˆ·ç‹¬ç«‹AIé…ç½®
- **çµæ´»æ€§**ï¼šç®¡ç†å‘˜å¯ä»¥åŠ¨æ€ç®¡ç†AIæœåŠ¡

### 3. æ ‡å‡†åˆè§„
- **Mem0AIæ ‡å‡†**ï¼šå®Œå…¨ç¬¦åˆå®˜æ–¹é…ç½®è¦æ±‚
- **æœ€ä½³å®è·µ**ï¼šéµå¾ªè¡Œä¸šæ ‡å‡†é…ç½®æ¨¡å¼
- **æ‰©å±•æ€§**ï¼šæ˜“äºæ·»åŠ æ–°çš„AIæœåŠ¡å•†

## ğŸ”§ åç»­å»ºè®®

### 1. æ•°æ®åº“è®¾ç½®
1. å¯åŠ¨PostgreSQLæœåŠ¡
2. åˆ›å»ºæ•°æ®åº“å’Œç”¨æˆ·
3. è¿è¡Œæ•°æ®åº“è¿ç§»

### 2. AIé…ç½®ç®¡ç†
1. å®ç°AIå‡­è¯ç®¡ç†API
2. åˆ›å»ºç®¡ç†ç•Œé¢
3. å®ç°å¤šç§Ÿæˆ·AIé…ç½®

### 3. æµ‹è¯•éªŒè¯
1. ç«¯åˆ°ç«¯æµ‹è¯•
2. AIæœåŠ¡é›†æˆæµ‹è¯•
3. å¤šç§Ÿæˆ·éš”ç¦»æµ‹è¯•

---

**è§£å†³å®Œæˆæ—¶é—´**: 2025å¹´7æœˆ9æ—¥ 16:00  
**ä¸»è¦æˆæœ**: ç»Ÿä¸€é…ç½®ç®¡ç†ã€AIæ¶æ„åˆ†å±‚ã€Mem0AIæ ‡å‡†åŒ–  
**çŠ¶æ€**: åç«¯é…ç½®é—®é¢˜å…¨éƒ¨è§£å†³ï¼Œå¯æ­£å¸¸å¯åŠ¨