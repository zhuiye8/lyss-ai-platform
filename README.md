# Lyss AI Platform - ä¼ä¸šçº§AIæœåŠ¡èšåˆä¸ç®¡ç†å¹³å°

## ğŸš€ å¿«é€Ÿå¼€å§‹

Lyss æ˜¯ä¸€ä¸ªé¢å‘ä¼ä¸šçš„AIæœåŠ¡èšåˆä¸ç®¡ç†å¹³å°ï¼Œé‡‡ç”¨å¾®æœåŠ¡æ¶æ„å®ç°å¤šç§Ÿæˆ·AIæ¨¡å‹çš„ç»Ÿä¸€æ¥å…¥ã€ç¼–æ’å’Œæ²»ç†ã€‚

### ğŸ“‹ å‰ç½®è¦æ±‚

- **Docker & Docker Compose** (ç”¨äºåŸºç¡€è®¾æ–½)
- **Python 3.11+** (ç”¨äºåç«¯å¾®æœåŠ¡)
- **Go 1.21+** (ç”¨äº EINO å·¥ä½œæµæœåŠ¡)  
- **Node.js 18+** (ç”¨äºå‰ç«¯åº”ç”¨)

### âš¡ ä¸€é”®å¯åŠ¨

```bash
# 1. å…‹éš†é¡¹ç›®
git clone <repository-url>
cd lyss-ai-platform

# 2. å¤åˆ¶ç¯å¢ƒå˜é‡é…ç½®
cp .env.example .env

# 3. å¯åŠ¨åŸºç¡€è®¾æ–½æœåŠ¡ (æ•°æ®åº“ã€ç¼“å­˜ã€å‘é‡å­˜å‚¨)
docker-compose up -d

# 4. ç­‰å¾…æœåŠ¡å¯åŠ¨å®Œæˆ
sleep 15

# 5. éªŒè¯åŸºç¡€è®¾æ–½æœåŠ¡
docker-compose ps
```

### ğŸ—ï¸ æ¶æ„æ¦‚è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Frontend (React + Ant Design X)              â”‚
â”‚                          http://localhost:3000                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚ HTTPS/WSS
                          â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     API Gateway (FastAPI)                          â”‚
â”‚                      http://localhost:8000                         â”‚
â”‚  èŒè´£: ç»Ÿä¸€å…¥å£ã€è®¤è¯å§”æ‰˜ã€è¯·æ±‚è·¯ç”±ã€åˆ†å¸ƒå¼è¿½è¸ª                        â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚         â”‚         â”‚         â”‚         â”‚         â”‚
      â”‚ /auth/* â”‚ /admin/*â”‚ /chat/* â”‚ /memory/*â”‚         â”‚
      â”‚         â”‚         â”‚         â”‚         â”‚         â”‚
      â–¼         â–¼         â–¼         â–¼         â–¼         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Auth   â”‚ â”‚ Tenant  â”‚ â”‚  EINO   â”‚ â”‚ Memory  â”‚ â”‚  Redis  â”‚ â”‚PostgreSQLâ”‚
â”‚ Service â”‚ â”‚ Service â”‚ â”‚ Service â”‚ â”‚ Service â”‚ â”‚ (Cache) â”‚ â”‚   (DB)    â”‚
â”‚  :8001  â”‚ â”‚  :8002  â”‚ â”‚  :8003  â”‚ â”‚  :8004  â”‚ â”‚  :6379  â”‚ â”‚   :5432   â”‚
â”‚(FastAPI)â”‚ â”‚(FastAPI)â”‚ â”‚   (Go)  â”‚ â”‚(FastAPI)â”‚ â”‚         â”‚ â”‚           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“Š åŸºç¡€è®¾æ–½æœåŠ¡è¯´æ˜

| æœåŠ¡ | ç«¯å£ | æè¿° | å¥åº·æ£€æŸ¥ |
|-----|------|------|----------|
| PostgreSQL | 5432 | ä¸»æ•°æ®åº“ï¼Œæ”¯æŒ pgcrypto åŠ å¯† | `pg_isready` |
| Redis | 6379 | ç¼“å­˜å’Œä¼šè¯å­˜å‚¨ | `redis-cli ping` |
| Qdrant | 6333 | å‘é‡æ•°æ®åº“ (Memory Service) | `curl /health` |
| MinIO | 9000/9001 | å¯¹è±¡å­˜å‚¨ (å¯é€‰) | `curl /minio/health/live` |

## ğŸ”‘ é»˜è®¤æµ‹è¯•è´¦æˆ·

å¼€å‘ç¯å¢ƒå·²é¢„ç½®æµ‹è¯•è´¦æˆ·ï¼š

```
ç®¡ç†å‘˜è´¦æˆ·:
  é‚®ç®±: admin@lyss.dev
  å¯†ç : admin123
  æƒé™: ç§Ÿæˆ·ç®¡ç†å‘˜

æ™®é€šç”¨æˆ·:
  é‚®ç®±: user@lyss.dev  
  å¯†ç : user123
  æƒé™: ç»ˆç«¯ç”¨æˆ·

ç§Ÿæˆ·: dev-tenant (å¼€å‘æµ‹è¯•ç§Ÿæˆ·)
```

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### å¯åŠ¨å¾®æœåŠ¡ (æœ¬åœ°å¼€å‘)

æ¯ä¸ªå¾®æœåŠ¡éœ€è¦å•ç‹¬å¯åŠ¨ï¼Œæ¨èä½¿ç”¨å¤šä¸ªç»ˆç«¯çª—å£ï¼š

```bash
# ç»ˆç«¯ 1 - Auth Service (è®¤è¯æœåŠ¡)
cd auth-service
pip install -r requirements.txt
uvicorn auth_service.main:app --host 0.0.0.0 --port 8001 --reload

# ç»ˆç«¯ 2 - Tenant Service (ç§Ÿæˆ·ç®¡ç†æœåŠ¡)
cd tenant-service  
pip install -r requirements.txt
uvicorn tenant_service.main:app --host 0.0.0.0 --port 8002 --reload

# ç»ˆç«¯ 3 - EINO Service (AIå·¥ä½œæµæœåŠ¡)
cd eino-service
go mod download
go run cmd/server/main.go

# ç»ˆç«¯ 4 - Memory Service (è®°å¿†ç®¡ç†æœåŠ¡)
cd memory-service
pip install -r requirements.txt  
uvicorn main:app --host 0.0.0.0 --port 8004 --reload

# ç»ˆç«¯ 5 - API Gateway (APIç½‘å…³)
cd backend
pip install -r requirements.txt
uvicorn main:app --host 0.0.0.0 --port 8000 --reload

# ç»ˆç«¯ 6 - Frontend (å‰ç«¯åº”ç”¨)
cd frontend
npm install
npm run dev
```

### å¥åº·æ£€æŸ¥

```bash
# æ£€æŸ¥æ‰€æœ‰æœåŠ¡çŠ¶æ€
curl http://localhost:8000/health  # API Gateway
curl http://localhost:8001/health  # Auth Service  
curl http://localhost:8002/health  # Tenant Service
curl http://localhost:8003/health  # EINO Service
curl http://localhost:8004/health  # Memory Service

# æ£€æŸ¥åŸºç¡€è®¾æ–½
docker-compose ps
```

## ğŸ”’ å®‰å…¨é…ç½®

### ç¯å¢ƒå˜é‡é…ç½®

**é‡è¦**: ç”Ÿäº§ç¯å¢ƒå¿…é¡»æ›´æ¢ `.env` æ–‡ä»¶ä¸­çš„æ‰€æœ‰é»˜è®¤å¯†é’¥ï¼

```bash
# ç”Ÿæˆå¼ºå¯†é’¥ç¤ºä¾‹
# JWT ç­¾åå¯†é’¥ (32+ å­—ç¬¦)
SECRET_KEY="your-super-secret-jwt-key-32-characters-min"

# pgcrypto åŠ å¯†å¯†é’¥ (32+ å­—ç¬¦)  
PGCRYPTO_KEY="your-pgcrypto-encryption-key-32-chars"

# æ•°æ®åº“å¯†ç 
DB_PASSWORD="your-strong-database-password"

# Redis å¯†ç 
REDIS_PASSWORD="your-strong-redis-password"
```

### å¤šç§Ÿæˆ·æ•°æ®éš”ç¦»

- **æ•°æ®åº“çº§éš”ç¦»**: æ•æ„Ÿæ•°æ®å­˜å‚¨åœ¨ç§Ÿæˆ·ä¸“ç”¨æ•°æ®åº“
- **è¡¨çº§éš”ç¦»**: å…±äº«è¡¨é€šè¿‡ `tenant_id` å­—æ®µå¼ºåˆ¶è¿‡æ»¤
- **ç¼“å­˜éš”ç¦»**: Redis é”®ä½¿ç”¨ `tenant:{id}:{key}` æ¨¡å¼
- **APIéš”ç¦»**: JWT ä¸­åŒ…å« `tenant_id`ï¼Œä¸­é—´ä»¶è‡ªåŠ¨æ³¨å…¥ä¸Šä¸‹æ–‡

## ğŸ“– æ–‡æ¡£é“¾æ¥

| æ–‡æ¡£ç±»å‹ | é“¾æ¥ | æè¿° |
|---------|------|------|
| å¼€å‘è§„èŒƒ | [docs/STANDARDS.md](./docs/STANDARDS.md) | ä»£ç è§„èŒƒã€APIè®¾è®¡ã€é”™è¯¯å¤„ç†ç­‰ |
| é¡¹ç›®ç»“æ„ | [docs/PROJECT_STRUCTURE.md](./docs/PROJECT_STRUCTURE.md) | ç›®å½•ç»“æ„å’Œæ–‡ä»¶ç»„ç»‡è§„èŒƒ |
| APIç½‘å…³ | [docs/api_gateway.md](./docs/api_gateway.md) | APIç½‘å…³æœåŠ¡è¯¦ç»†è§„èŒƒ |
| è®¤è¯æœåŠ¡ | [docs/auth_service.md](./docs/auth_service.md) | JWTè®¤è¯å’Œç”¨æˆ·ç™»å½•è§„èŒƒ |
| ç§Ÿæˆ·æœåŠ¡ | [docs/tenant_service.md](./docs/tenant_service.md) | ç§Ÿæˆ·å’Œç”¨æˆ·ç®¡ç†è§„èŒƒ |
| EINOæœåŠ¡ | [docs/eino_service.md](./docs/eino_service.md) | AIå·¥ä½œæµç¼–æ’æœåŠ¡è§„èŒƒ |
| è®°å¿†æœåŠ¡ | [docs/memory_service.md](./docs/memory_service.md) | å¯¹è¯è®°å¿†ç®¡ç†æœåŠ¡è§„èŒƒ |

## ğŸš¨ å¼€å‘æ³¨æ„äº‹é¡¹

### æ ¸å¿ƒåŸåˆ™

1. **å®‰å…¨ç¬¬ä¸€**: æ‰€æœ‰æ“ä½œå¿…é¡»éªŒè¯ `tenant_id`ï¼Œæ•æ„Ÿæ•°æ®å¿…é¡»åŠ å¯†
2. **æœåŠ¡è¾¹ç•Œ**: ä¸¥æ ¼éµå¾ªå¾®æœåŠ¡èŒè´£ï¼Œä¸å¾—è·¨æœåŠ¡ç›´æ¥è®¿é—®æ•°æ®
3. **å…¨é“¾è·¯è¿½è¸ª**: æ¯ä¸ªè¯·æ±‚å¿…é¡»æºå¸¦ `X-Request-ID`
4. **ä¸­æ–‡å¼€å‘**: æ‰€æœ‰æ³¨é‡Šã€æäº¤ä¿¡æ¯ã€é”™è¯¯æ¶ˆæ¯ä½¿ç”¨ä¸­æ–‡

### ä»£ç æäº¤è§„èŒƒ

```bash
# æäº¤ä¿¡æ¯æ ¼å¼
git commit -m "feat(æ¨¡å—): åŠŸèƒ½æè¿°"
git commit -m "fix(auth): ä¿®å¤JWTä»¤ç‰ŒéªŒè¯é—®é¢˜"  
git commit -m "docs(api): æ›´æ–°APIæ–‡æ¡£è¯´æ˜"
```

## ğŸ†˜ é—®é¢˜æ’æŸ¥

### å¸¸è§é—®é¢˜

1. **æœåŠ¡å¯åŠ¨å¤±è´¥**: æ£€æŸ¥ç«¯å£å ç”¨å’Œç¯å¢ƒå˜é‡é…ç½®
2. **æ•°æ®åº“è¿æ¥å¤±è´¥**: ç¡®è®¤ Docker æœåŠ¡å¯åŠ¨å®Œæˆ
3. **è®¤è¯å¤±è´¥**: éªŒè¯ JWT å¯†é’¥é…ç½®
4. **æ•°æ®éš”ç¦»é—®é¢˜**: æ£€æŸ¥ `tenant_id` çš„ä¼ é€’å’Œè¿‡æ»¤

### æ—¥å¿—æŸ¥çœ‹

```bash
# æŸ¥çœ‹ç‰¹å®šè¯·æ±‚çš„å…¨é“¾è·¯æ—¥å¿—
grep "request_id:xxx" logs/*.log

# æŸ¥çœ‹ç‰¹å®šç§Ÿæˆ·çš„æ“ä½œæ—¥å¿—  
grep "tenant_id:xxx" logs/*.log

# æŸ¥çœ‹ Docker å®¹å™¨æ—¥å¿—
docker-compose logs postgres
docker-compose logs redis
```

---

**âš ï¸ é‡è¦æé†’**: æœ¬å¹³å°å¤„ç†å¤šç§Ÿæˆ·æ•°æ®å’ŒAIä¾›åº”å•†å‡­è¯ï¼Œä»»ä½•ä»£ç å˜æ›´éƒ½å¿…é¡»ç»è¿‡ä¸¥æ ¼çš„å®‰å…¨å®¡æŸ¥ã€‚å¼€å‘è¿‡ç¨‹ä¸­å¦‚æœ‰ç–‘é—®ï¼Œè¯·å‚è€ƒå¯¹åº”æœåŠ¡çš„è§„èŒƒæ–‡æ¡£ã€‚