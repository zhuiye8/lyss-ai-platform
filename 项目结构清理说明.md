# 项目结构清理说明

## 清理完成的问题

### 1. 删除重复的memory-service目录
- **问题**: `backend/memory-service/` 是空目录，与根目录的 `memory-service/` 造成混淆
- **解决**: 删除了 `backend/memory-service/` 空目录
- **结果**: 现在只有根目录的 `memory-service/` 作为独立的微服务

### 2. 统一环境配置文件
- **问题**: 存在多个重复的 `.env` 文件：`.env.dev`, `.env.local`, `.env.example`
- **解决**: 
  - 删除了重复的 `.env.dev` 和 `.env.local`
  - 保留 `.env.example` 作为模板
  - 创建统一的 `.env` 文件，包含所有服务的配置
- **结果**: 所有服务使用统一的环境配置，避免配置不一致

### 3. 明确的服务架构
```
lyss-ai-platform/
├── backend/              # FastAPI 后端服务
│   ├── api-gateway/     # API 网关
│   ├── common/          # 共享组件
│   ├── tenant-service/  # 租户服务
│   └── tests/           # 测试
├── frontend/            # React 前端应用
├── eino-service/        # Go 服务，AI 工作流编排
├── memory-service/      # Python 服务，记忆管理
├── sql/                 # 数据库脚本
├── k8s/                 # Kubernetes 部署配置
└── monitoring/          # 监控配置
```

## 当前项目架构

### 微服务架构
1. **Backend** (FastAPI) - 主要API网关和业务逻辑
2. **Frontend** (React + TypeScript) - 用户界面
3. **EINO Service** (Go) - AI工作流编排服务
4. **Memory Service** (Python) - 记忆和向量存储服务

### 基础设施
- **PostgreSQL** - 主要数据库
- **Redis** - 缓存和向量存储
- **Prometheus + Grafana** - 监控系统

### 开发环境
- **Docker Compose** - 本地开发环境
- **统一的 .env 配置** - 所有服务使用同一配置文件
- **独立的服务目录** - 每个服务都有独立的目录结构

## 后续开发指南

### 启动开发环境
```bash
# 1. 启动基础设施服务
docker-compose up -d

# 2. 启动后端服务
cd backend && python -m uvicorn main:app --reload --host 0.0.0.0 --port 8000

# 3. 启动前端服务
cd frontend && npm run dev

# 4. 启动EINO服务
cd eino-service && go run cmd/main.go

# 5. 启动Memory服务
cd memory-service && python -m uvicorn app.main:app --reload --port 8001
```

### 配置管理
- 所有配置都在根目录的 `.env` 文件中
- 开发环境使用 `.env`，生产环境使用环境变量或密钥管理
- 每个服务都从统一的环境配置读取所需参数

### 服务间通信
- Backend (8000) ↔ Frontend (5173/3000)
- Backend (8000) ↔ EINO Service (8080)
- Backend (8000) ↔ Memory Service (8001)
- 所有服务通过 HTTP/WebSocket 通信

这样的结构清理确保了项目的清晰性和可维护性，避免了配置混乱和目录冲突。